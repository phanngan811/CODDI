{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kiet Duong\\\\OneDrive\\\\Desktop\\\\coddi\\\\coddiFront-end\\\\src\\\\components\\\\questions\\\\listQuestion.component.js\";\nimport React, { Component } from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport CourseService from \"../../services/course.service\";\nimport QuestionService from \"../../services/question.service\";\nimport NavAdmin from \"../nav/navAdmin\";\nimport Question from \"./Question.component\";\nexport default function ListQuestion(_ref) {\n  let {\n    id\n  } = _ref;\n  const [score, setScore] = useState(0);\n  const [questions, setQuestions] = useState([]);\n  const [countAnswered, setCountAnswered] = useState(0);\n  const [isFinished, setIsFinished] = useState(false);\n  const [isAnsweredAll, setIsAnsweredAll] = useState(false);\n  useEffect(() => {\n    getQuestion(); // alert(JSON.stringify(questions));\n  }, []);\n\n  function getQuestion() {\n    QuestionService.getAllQuestionCourse(id).then(response => {\n      var obj = response.data.Question;\n      var array = JSON.stringify(response.data.Question);\n\n      for (var i = 0; i < response.data.Question.length; i++) {\n        shuffle(response.data.Question[i].answers);\n      }\n\n      setQuestions(randomQuestion(response.data.Question));\n      alert(JSON.stringify(response.data.Question[0].answers));\n      console.log(response.data.Question);\n    }).catch(e => {\n      console.log(e);\n    });\n    console.log(id);\n  }\n\n  function randomQuestion(questions) {\n    return questions.sort(() => Math.random() - 0.5);\n  }\n\n  useEffect(() => {\n    if (countAnswered === questions.length && questions.length > 0) {\n      setIsAnsweredAll(true);\n      console.log(questions.length); // setIsFinished(true);\n\n      console.log(\"hello\");\n    }\n  }, [countAnswered]);\n\n  function computeScore() {\n    setScore(score + 1);\n  }\n\n  function countAnsweredOk() {\n    setCountAnswered(countAnswered + 1);\n  }\n\n  function getScoreCompa() {\n    const percentage = score / questions.length;\n\n    if (percentage > 0.8) {\n      return \"CONGRATULATION! YOU GET HD\";\n    }\n\n    if (percentage > 0.7) {\n      return \"CONGRATULATION! YOU GET DI\";\n    }\n\n    if (percentage > 0.6) {\n      return \"YOU GET CR\";\n    }\n\n    if (percentage > 0.5) {\n      return \"YOU GET PA\";\n    }\n\n    return \"YOU GET NN, TRY MORE\";\n  }\n\n  function shuffle(array) {\n    // for (var i = array.length - 1; i > 0; i--) {\n    //     var j = Math.floor(Math.random() * (i + 1));\n    //     var temp = array[i];\n    //     array[i] = array[j];\n    //     array[j] = temp;\n    //   }\n    //   return array;\n    return array.sort(() => Math.random() - 0.5);\n  } // handleAnswer\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavAdmin, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conatiner d-flex flex-column justify-content-center align-items-center p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Test\"), questions.map((_ref2, index) => {\n    let {\n      aQuestion,\n      description,\n      answers,\n      correct,\n      _id\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Question, {\n      isFinished: isFinished,\n      description: description,\n      onAnswered: countAnsweredOk,\n      computeScore: computeScore,\n      aQuestion: aQuestion,\n      answers: answers,\n      correct: correct,\n      key: _id,\n      index: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    });\n  }), isFinished && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 24\n    }\n  }, score), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: !isAnsweredAll,\n    \"data-bs-toggle\": \"modal\",\n    \"data-bs-target\": \"#finishedTextModal\",\n    onClick: () => setIsFinished(true),\n    className: \"btn btn-outline-primary mt-4 w-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"Finish test\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"finishedTextModal\",\n    tabIndex: -1,\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"Test result\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"Your score: \", score, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, getScoreCompa())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-bs-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Close\")))))));\n}","map":{"version":3,"names":["React","Component","useEffect","useState","CourseService","QuestionService","NavAdmin","Question","ListQuestion","id","score","setScore","questions","setQuestions","countAnswered","setCountAnswered","isFinished","setIsFinished","isAnsweredAll","setIsAnsweredAll","getQuestion","getAllQuestionCourse","then","response","obj","data","array","JSON","stringify","i","length","shuffle","answers","randomQuestion","alert","console","log","catch","e","sort","Math","random","computeScore","countAnsweredOk","getScoreCompa","percentage","map","index","aQuestion","description","correct","_id"],"sources":["C:/Users/Kiet Duong/OneDrive/Desktop/coddi/coddiFront-end/src/components/questions/listQuestion.component.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport CourseService from \"../../services/course.service\";\r\nimport QuestionService from \"../../services/question.service\";\r\nimport NavAdmin from \"../nav/navAdmin\";\r\nimport Question from \"./Question.component\";\r\n\r\nexport default function ListQuestion({ id }) {\r\n  const [score, setScore] = useState(0);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [countAnswered, setCountAnswered] = useState(0);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n  const [isAnsweredAll, setIsAnsweredAll] = useState(false);\r\n  useEffect(() => {\r\n    getQuestion();\r\n    // alert(JSON.stringify(questions));\r\n  }, []);\r\n\r\n  function getQuestion() {\r\n    QuestionService.getAllQuestionCourse(id)\r\n      .then((response) => {\r\n        var obj = response.data.Question;\r\n        var array = JSON.stringify(response.data.Question);\r\n        for (var i = 0; i < response.data.Question.length; i++) {\r\n          shuffle(response.data.Question[i].answers);\r\n        }\r\n        setQuestions(randomQuestion(response.data.Question));\r\n        alert(JSON.stringify(response.data.Question[0].answers));\r\n        console.log(response.data.Question);\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n    console.log(id);\r\n  }\r\n  function randomQuestion(questions) {\r\n    return questions.sort(() => Math.random() - 0.5);\r\n  }\r\n  useEffect(() => {\r\n    if (countAnswered === questions.length && questions.length > 0) {\r\n      setIsAnsweredAll(true);\r\n      console.log(questions.length);\r\n      // setIsFinished(true);\r\n      console.log(\"hello\");\r\n    }\r\n  }, [countAnswered]);\r\n\r\n  function computeScore() {\r\n    setScore(score + 1);\r\n  }\r\n  function countAnsweredOk() {\r\n    setCountAnswered(countAnswered + 1);\r\n  }\r\n  function getScoreCompa() {\r\n    const percentage = score / questions.length;\r\n    if (percentage > 0.8) {\r\n      return \"CONGRATULATION! YOU GET HD\";\r\n    }\r\n    if (percentage > 0.7) {\r\n      return \"CONGRATULATION! YOU GET DI\";\r\n    }\r\n    if (percentage > 0.6) {\r\n      return \"YOU GET CR\";\r\n    }\r\n    if (percentage > 0.5) {\r\n      return \"YOU GET PA\";\r\n    }\r\n    return \"YOU GET NN, TRY MORE\";\r\n  }\r\n  function shuffle(array) {\r\n    // for (var i = array.length - 1; i > 0; i--) {\r\n    //     var j = Math.floor(Math.random() * (i + 1));\r\n    //     var temp = array[i];\r\n    //     array[i] = array[j];\r\n    //     array[j] = temp;\r\n    //   }\r\n    //   return array;\r\n    return array.sort(() => Math.random() - 0.5);\r\n  }\r\n  // handleAnswer\r\n  \r\n  return (\r\n    <div>\r\n      <NavAdmin />\r\n      <div className=\"conatiner d-flex flex-column justify-content-center align-items-center p-4\">\r\n          <h2>Test</h2>\r\n          {/* {\r\n            alert(JSON.stringify(questions))\r\n          } */}\r\n        {questions.map(({ aQuestion, description, answers, correct, _id }, index) => (\r\n          <Question\r\n            isFinished={isFinished}\r\n            description={description}\r\n            onAnswered={countAnsweredOk}\r\n            computeScore={computeScore}\r\n            aQuestion={aQuestion}\r\n            answers={answers}\r\n            correct={correct}\r\n            key={_id}\r\n            index={index}\r\n          />\r\n        ))}\r\n        {isFinished && <p>{score}</p>}\r\n\r\n        <button\r\n          disabled={!isAnsweredAll}\r\n          data-bs-toggle=\"modal\"\r\n          data-bs-target=\"#finishedTextModal\"\r\n          onClick={() => setIsFinished(true)}\r\n          className=\"btn btn-outline-primary mt-4 w-25\"\r\n        >\r\n          Finish test\r\n        </button>\r\n\r\n        <div\r\n          className=\"modal fade\"\r\n          id=\"finishedTextModal\"\r\n          tabIndex={-1}\r\n          aria-labelledby=\"exampleModalLabel\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                  Test result\r\n                </h5>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"modal-body\">\r\n                Your score: {score}\r\n                <p>{getScoreCompa()}</p>\r\n              </div>\r\n\r\n              <div className=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  data-bs-dismiss=\"modal\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}